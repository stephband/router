<head>
	<meta charset="utf-8" />
	<meta name="author" content="" />
	<meta name="description" content="" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<title>Router</title>

	<!-- Bolt requires this. -->
	<script>document.documentElement.className = 'js';</script>

	<link rel="stylesheet" type="text/css" href="//stephen.band/bolt/dist/bolt.css" />
	<link rel="stylesheet" type="text/css" href="../fn/css/grid.css" />
	<link rel="stylesheet" type="text/css" href="../fn/css/docs.css" />
	<link rel="stylesheet" type="text/css" href="../dom/css/dom.css" />
	<link rel="stylesheet" type="text/css" href="../dom/css/demo.css" />
</head>

<body>
	<header class="grid-block block">
		<h1 class="block @2-grid-left-1/15 @3-grid-left-1/9">Router</h1>
	</header>

	<div class="spaced-grid-block grid-block block">
		<article class="grid-block block @2-span-11/15 @2-span-left-2/15 @3-span-2/9 @3-span-left-1/9">
			<h2 class="block">Router</h2>

			<div class="toggleable toggle-block block span-1/1 @1-span-1/1 @2-span-1/1 @3-span-1/1" id="navigate">
				<h3 class="dot-indent text-5"><a href="#navigate"><code class="js">.navigate(path)</code></a></h3>
				<p>Routes all routers to <code class="js">path</code> and updates the browser location.</p>
				<p><code class="js">path</code> must be a full path name, beginning with '/'.</p>
			</div>

			<div class="toggleable toggle-block block span-1/1 @1-span-1/1 @2-span-1/1 @3-span-1/1" id="route">
				<h3 class="dot-indent text-5"><a href="#route"><code class="js">.route(path)</code></a></h3>
				<p>Routes all routers to <code class="js">path</code> <i>without</i> updating the browser location.</p>
				<p><code class="js">path</code> must be a full path name, beginning with '/'.</p>
			</div>
		</article

		><article class="grid-block block @2-span-11/15 @2-span-left-2/15 @3-span-2/9 @3-span-left-1/9">
			<h2 class="block">Router(base, routes)</h2>

			<p>
				Creates a router for the base path <code class="js-code">base</code>.
				The optional <code class="js-code">routes</code> object is a series
				of key/value pairs where the key is an escaped regex and the value
				a routing function. If a route is found to match the current location
				it's routing function is called immediately.
			</p>

			<div class="toggleable toggle-block block span-1/1 @1-span-1/1 @2-span-1/1 @3-span-1/1" id="body">
				<h3 class="dot-indent text-5"><a href="#body"><code class="js">.base</code></a></h3>
			</div>

			<div class="toggleable toggle-block block span-1/1 @1-span-1/1 @2-span-1/1 @3-span-1/1" id="router-navigation">
				<h3 class="dot-indent text-5"><a href="#router-navigation"><code class="js">.navigate(path)</code></a></h3>
				<p>Routes all routers to <code class="js">path</code> and updates the browser location.
				<code class="js">path</code> may be a full path name, beginning with '/', or a path relative to the base of the router.</p>
			</div>

			<div class="toggleable toggle-block block span-1/1 @1-span-1/1 @2-span-1/1 @3-span-1/1" id="root">
				<h3 class="dot-indent text-5"><a href="#root"><code class="js">.route(path)</code></a></h3>
				<p>Calls the route handler for the first route found to match <code class="js">path</code>,
				where <code class="js">path</code> may be a full path name, beginning with '/',
				or a path relative to the base of the router.</p>
			</div>

			<div class="toggleable toggle-block block span-1/1 @1-span-1/1 @2-span-1/1 @3-span-1/1" id="root">
				<h3 class="dot-indent text-5"><a href="#root"><code class="js">.on(regex, fn)</code></a></h3>
				<p>Binds a handler function to a route.</p>
			</div>

			<div class="toggleable toggle-block block span-1/1 @1-span-1/1 @2-span-1/1 @3-span-1/1" id="root">
				<h3 class="dot-indent text-5"><a href="#root"><code class="js">.off(regex, fn)</code></a></h3>
				<p>Removes a handler function from a route.</p>
			</div>

			<div class="toggleable toggle-block block span-1/1 @1-span-1/1 @2-span-1/1 @3-span-1/1" id="body">
				<h3 class="dot-indent text-5"><a href="#body"><code class="js">.stop()</code></a></h3>
				<p>Stops the router from handling routes.</p>
			</div>
		</article

		><article class="block @2-span-left-2/15 @2-span-5/6 @3-span-left-1/9 @3-span-2/3">
			<h2 class="block">Test links</h2>

			<a class="block" href="/test/hello">/test/hello</a>
			<a class="block" href="/test/is-a-route">/test/is-a-route</a>
			<a class="block" href="/test/is-a-route#doesnt-exist">/test/is-a-route#doesnt-exist</a>
			<a class="block" href="/test/not-a-route">/test/is-not-a-route</a>
			<a class="block" href="/outside-route">/outside-route</a>
		</article>
	</div>

	<script src="js/router.js"></script>
	<script src="js/router-dom.js"></script>

	<!-- Tests -->

	<script src="../fn/js/fn.js"></script>
	<script src="../fn/js/stream.js"></script>
	<script src="../dom/js/dom.js"></script>
	<script src="../dom/js/dom-activate.js"></script>
	<script src="../dom/js/dom.toggleable.js"></script>
	<script src="../fn/test/test.js"></script>

	<script>
	var router = new Router('/test', {
		'^hello$': function() {
			console.log(1, 'entering /hello');
			return function() {
				console.log(2, 'exiting  /hello');
			};
		},

		'^is-a-route$': function() {
			console.log(0, 'Is a route');
		}
	});

	router.on(/^hello(\w+)$/, function($1) {
		console.log(3, 'entering /hello(...)', arguments);
		return function() {
			console.log(2, 'exiting  /hello(...)');
		};
	});

	//var sub = router.create(/^boo/);
	//sub.on(/^(foo)/, function($1) {
	//	console.log(6, 'entering /test/boo/foo', arguments);
	//	return function() {
	//		console.log(6, 'exiting  /test/boo/foo', arguments);
	//	};
	//})

	setTimeout(function() {
	router.navigate('hello');

		setTimeout(function() {
			router.navigate('helloparameter');

			setTimeout(function() {
				router.navigate('boo/foo');

				setTimeout(function() {
					//window.location = '/static/router/index.html';
				}, 5000);
			}, 5000);
		}, 5000);
	}, 5000);






	function click(e) {
		console.log(e.defaultPrevented, e.defaultPrevented ? 'Location would not change' : 'Location would change');
		e.preventDefault();
	}

	//document.addEventListener('click', click);

	</script>
</body>
