<head>
	<meta charset="utf-8" />
	<meta name="author" content="" />
	<meta name="description" content="" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<title>Router</title>

	<!-- Bolt requires this. -->
	<script>document.documentElement.className = 'js';</script>

	<link rel="stylesheet" type="text/css" href="//stephen.band/bolt/dist/bolt.min.css" />
	<link rel="stylesheet" type="text/css" href="../fn/css/grid.css" />
	<link rel="stylesheet" type="text/css" href="../fn/css/docs.css" />
	<link rel="stylesheet" type="text/css" href="../dom/css/dom.css" />
	<link rel="stylesheet" type="text/css" href="../dom/css/demo.css" />
</head>

<body>
	<header class="grid-block block">
		<h1 class="block @2-grid-left-1/15 @3-grid-left-1/9">Router</h1>
	</header>

	<div class="spaced-grid-block grid-block block">
		<article class="grid-block block @2-span-11/15 @2-span-left-2/15 @3-span-2/9 @3-span-left-1/9">
			<h2 class="block">Router</h2>

			<div class="toggleable toggle-block block span-1/1 @1-span-1/1 @2-span-1/1 @3-span-1/1" id="head">
				<h3 class="dot-indent text-5"><a href="#head"><code class="js">.navigate(path)</code></a></h3>
			</div>

			<div class="toggleable toggle-block block span-1/1 @1-span-1/1 @2-span-1/1 @3-span-1/1" id="root">
				<h3 class="dot-indent text-5"><a href="#root"><code class="js">.route(path)</code></a></h3>
			</div>
		</article

		><article class="grid-block block @2-span-11/15 @2-span-left-2/15 @3-span-2/9 @3-span-left-1/9">
			<h2 class="block">Router(path, routes)</h2>

			<div class="toggleable toggle-block block span-1/1 @1-span-1/1 @2-span-1/1 @3-span-1/1" id="body">
				<h3 class="dot-indent text-5"><a href="#body"><code class="js">.base</code></a></h3>
			</div>

			<div class="toggleable toggle-block block span-1/1 @1-span-1/1 @2-span-1/1 @3-span-1/1" id="head">
				<h3 class="dot-indent text-5"><a href="#head"><code class="js">.navigate(path)</code></a></h3>
			</div>

			<div class="toggleable toggle-block block span-1/1 @1-span-1/1 @2-span-1/1 @3-span-1/1" id="root">
				<h3 class="dot-indent text-5"><a href="#root"><code class="js">.route(path)</code></a></h3>
			</div>

			<div class="toggleable toggle-block block span-1/1 @1-span-1/1 @2-span-1/1 @3-span-1/1" id="root">
				<h3 class="dot-indent text-5"><a href="#root"><code class="js">.on(regex, fn)</code></a></h3>
			</div>

			<div class="toggleable toggle-block block span-1/1 @1-span-1/1 @2-span-1/1 @3-span-1/1" id="root">
				<h3 class="dot-indent text-5"><a href="#root"><code class="js">.off(regex, fn)</code></a></h3>
			</div>

			<div class="toggleable toggle-block block span-1/1 @1-span-1/1 @2-span-1/1 @3-span-1/1" id="body">
				<h3 class="dot-indent text-5"><a href="#body"><code class="js">.destroy(path)</code></a></h3>
			</div>
		</article>
	</div>

	<a href="/test/hello">/test/hello</a>
	<a href="/test/is-a-route">/test/is-a-route</a>
	<a href="/test/not-a-route">/test/is-not-a-route</a>
	<a href="/outside-route">/outside-route</a>

	<script src="js/router.js"></script>

	<!-- Tests -->

	<script src="../fn/js/fn.js"></script>
	<script src="../fn/js/stream.js"></script>
	<script src="../dom/js/dom.js"></script>
	<script src="../fn/test/test.js"></script>

	<script>
	var router = new Router('/test', {
		'^hello$': function() {
			console.log(1, 'entering /hello');
			return function() {
				console.log(2, 'exiting  /hello');
			};
		},

		'^is-a-route$': function() {
			console.log(0, 'Is a route');
		}
	});

	router.on(/^hello(\w+)$/, function($1) {
		console.log(3, 'entering /hello(...)', arguments);
		return function() {
			console.log(2, 'exiting  /hello(...)');
		};
	});

	//var sub = router.create(/^boo/);
	//sub.on(/^(foo)/, function($1) {
	//	console.log(6, 'entering /test/boo/foo', arguments);
	//	return function() {
	//		console.log(6, 'exiting  /test/boo/foo', arguments);
	//	};
	//})

	setTimeout(function() {
	router.navigate('hello');

		setTimeout(function() {
			router.navigate('helloparameter');

			setTimeout(function() {
				router.navigate('boo/foo');

				setTimeout(function() {
					//window.location = '/static/router/index.html';
				}, 5000);
			}, 5000);
		}, 5000);
	}, 5000);






	function click(e) {
		console.log(e.defaultPrevented, e.defaultPrevented ? 'Location would not change' : 'Location would change');
		e.preventDefault();
	}

	//document.addEventListener('click', click);

	</script>
</body>
