<head>
	<meta charset="utf-8" />
	<meta name="author" content="" />
	<meta name="description" content="" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<title>Router</title>

	<!-- Bolt requires this. -->
	<script>document.documentElement.className = 'js';</script>

	<link rel="stylesheet" type="text/css" href="http://stephen.band/bolt/dist/bolt.min.css" />
	<link rel="stylesheet" type="text/css" href="http://stephen.band/dom/css/dom.css" />
	<link rel="stylesheet" type="text/css" href="http://stephen.band/fn/css/grid.css" />
	<link rel="stylesheet" type="text/css" href="http://stephen.band/fn/css/docs.css" />
	<link href="https://fonts.googleapis.com/css?family=Roboto+Mono:100,300,400,500,700" rel="stylesheet">

	<style>
	body {
		color: #e2bc72;
		background-color: #23292d;
	}

	code {
		background-color: #16191d;
	}

	.toggle-block.active::before {
		background-color: #303c48;
	}
	</style>
</head>

<body>
	<header class="grid-block block">
		<div class="grid-block block @2-span-11/15 @2-span-left-2/15 @3-span-2/9 @3-span-left-1/9">
			<h1 class="block">Router</h1>
			<p class="block">A regex-based URL router and link hijacker.</p>
		</div>
	</header>

	<br/>

	<div class="spaced-grid-block grid-block block">
		<article class="grid-block block @2-span-11/15 @2-span-left-2/15 @3-span-2/9 @3-span-left-1/9">
			<h2 class="block">Router</h2>

			<div class="toggleable toggle-block block span-1/1 @1-span-1/1 @2-span-1/1 @3-span-1/1" id="router.navigate">
				<h3 class="dot-indent text-5"><a href="#router.navigate"><code class="js">.navigate(path)</code></a></h3>
				<p>Routes all routers to <code class="js">path</code> and updates the browser location.</p>
				<p><code class="js">path</code> must be a full path from the domain, beginning with '/'.</p>
			</div>

			<div class="toggleable toggle-block block span-1/1 @1-span-1/1 @2-span-1/1 @3-span-1/1" id="router.route">
				<h3 class="dot-indent text-5"><a href="#router.route"><code class="js">.route(path)</code></a></h3>
				<p>Routes all routers to <code class="js">path</code> <i>without</i> updating the browser location.</p>
				<p><code class="js">path</code> must be a full path from the domain, beginning with '/'.</p>
			</div>
		</article

		><article class="grid-block block @2-span-11/15 @2-span-left-2/15 @3-span-2/9">
			<h2 class="block">Router()</h2>

			<div class="toggleable toggle-block block span-1/1 @1-span-1/1 @2-span-1/1 @3-span-1/1" id="router">
				<h3 class="text-5"><a href="#router"><code class="js-code">Router(base, routes)</code></a></h3>
				<p>
					Creates a router for the base path <code class="js-code">base</code>.
					The optional <code class="js-code">routes</code> object is a series
					of key/value pairs where the key is an escaped regex and the value
					a routing function. If a route is found to match the current location
					it's routing function is called immediately.
				</p>
			</div>

			<div class="toggleable toggle-block block span-1/1 @1-span-1/1 @2-span-1/1 @3-span-1/1" id="body">
				<h3 class="dot-indent text-5"><a href="#body"><code class="js-code">.base</code></a></h3>
			</div>

			<!--div class="toggleable toggle-block block span-1/1 @1-span-1/1 @2-span-1/1 @3-span-1/1" id="router-navigation">
				<h3 class="dot-indent text-5"><a href="#router-navigation"><code class="js">.navigate(path)</code></a></h3>
				<p>Routes all routers to <code class="js">path</code> and updates the browser location.
				<code class="js">path</code> may be a full path name, beginning with '/', or a path relative to the base of the router.</p>
			</div-->

			<div class="toggleable toggle-block block span-1/1 @1-span-1/1 @2-span-1/1 @3-span-1/1" id="route">
				<h3 class="dot-indent text-5"><a href="#route"><code class="js">.route(path)</code></a></h3>
				<p>Calls the route handler for the first route found to match <code class="js">path</code>,
				where <code class="js">path</code> may be a full path name, beginning with '/',
				or a path relative to the base of the router.</p>
			</div>

			<div class="toggleable toggle-block block span-1/1 @1-span-1/1 @2-span-1/1 @3-span-1/1" id="on">
				<h3 class="dot-indent text-5"><a href="#on"><code class="js">.on(regex, fn)</code></a></h3>
				<p>
				Binds a handler function to a route. The handler function is
				called with <code class="js">router</code> as context and the
				capturing groups of <code class="js">regex</code> as parameters.
				</p>
				<p>
				At the point in time that the handler function is called
				<code class="js">router</code> has not yet changed state â€“ ie.
				<code class="js">router.path</code> is still set to the previous
				route's path.
				</p>
				<p>
				Return a function from a handler function and that function will
				be called when the route next changes, allowing you to teardown
				anything that has been set up in the handler.
				</p>
				<p>
				Return false from a handler function to tell the router that
				this routing was unsuccessful, whereby the router goes on to try
				other routes or fallback to default browser navigation.
				</p>
			</div>

			<div class="toggleable toggle-block block span-1/1 @1-span-1/1 @2-span-1/1 @3-span-1/1" id="off">
				<h3 class="dot-indent text-5"><a href="#off"><code class="js">.off(regex, fn)</code></a></h3>
				<p>Removes a handler function from a route.</p>
			</div>

			<div class="toggleable toggle-block block span-1/1 @1-span-1/1 @2-span-1/1 @3-span-1/1" id="stop">
				<h3 class="dot-indent text-5"><a href="#stop"><code class="js">.stop()</code></a></h3>
				<p>Stops the router from handling routes.</p>
			</div>

			<div class="toggleable toggle-block block span-1/1 @1-span-1/1 @2-span-1/1 @3-span-1/1" id="path">
				<h3 class="dot-indent text-5"><a href="#path"><code class="js">.path</code></a></h3>
				<p>The current path from router base. Read-only.</p>
			</div>
		</article

		><!--article class="grid-block block @2-span-4/15 @3-span-2/9">
			<h2 class="block grid-1/1">Test</h2>

			<div class="block grid-1/1">
				<a class="block" href="/test/hello">/test/hello</a>
				<a class="block" href="/test/is-a-route">/test/is-a-route</a>
				<a class="block" href="/test/is-a-route#doesnt-exist">/test/is-a-route#doesnt-exist</a>
				<a class="block" href="/test/not-a-route">/test/is-not-a-route</a>
				<a class="block" href="/outside-route">/outside-route</a>
			</div>
		</article-->
	</div>

	<script src="js/router.js"></script>
	<script src="js/router-dom.js"></script>

	<!-- Tests -->

	<script src="../fn/js/fn.js"></script>
	<script src="../fn/js/stream.js"></script>
	<script src="../dom/js/dom.js"></script>
	<script src="../dom/js/dom-activate.js"></script>
	<script src="../dom/js/dom.toggleable.js"></script>
	<script src="../fn/test/test.js"></script>

	<script>
	var router = new Router('/test', {
		'^hello$': function() {
			console.log(1, 'entering /hello');
			return function() {
				console.log(2, 'exiting  /hello');
			};
		},

		'^is-a-route$': function() {
			console.log(0, 'Is a route');
		}
	});

	router.on(/^hello(\w+)$/, function($1) {
		console.log(3, 'entering /hello(...)', arguments);
		return function() {
			console.log(2, 'exiting  /hello(...)');
		};
	});

	//var sub = router.create(/^boo/);
	//sub.on(/^(foo)/, function($1) {
	//	console.log(6, 'entering /test/boo/foo', arguments);
	//	return function() {
	//		console.log(6, 'exiting  /test/boo/foo', arguments);
	//	};
	//})
/*
	setTimeout(function() {
	router.navigate('hello');

		setTimeout(function() {
			router.navigate('helloparameter');

			setTimeout(function() {
				router.navigate('boo/foo');

				setTimeout(function() {
					//window.location = '/static/router/index.html';
				}, 5000);
			}, 5000);
		}, 5000);
	}, 5000);
*/





	function click(e) {
		console.log(e.defaultPrevented, e.defaultPrevented ? 'Location would not change' : 'Location would change');
		e.preventDefault();
	}

	//document.addEventListener('click', click);

	</script>
</body>
